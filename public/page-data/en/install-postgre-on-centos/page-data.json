{"componentChunkName":"component---src-templates-blog-post-js","path":"/en/install-postgre-on-centos/","result":{"data":{"site":{"siteMetadata":{"title":"LEE-PING","author":"lee-ping"}},"markdownRemark":{"id":"96b23e18-04c1-5930-bf26-a77b666e259c","html":"<h3 id=\"installation\"><a href=\"#installation\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation</h3>\n<p>OS: CentsOS / Install Type: RPM</p>\n<ol>\n<li>To add and update the pgdg repository to get\nPostgreSQL 11, run the following command:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token function\">install</span> https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm</code></pre></div>\n<ol start=\"2\">\n<li>To install the server packages:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token function\">install</span> postgresql11-server</code></pre></div>\n<ol start=\"3\">\n<li>To initialize the database and enable automatic start:</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">/usr/pgsql-11/bin/postgresql-11-setup initdb\nsystemctl <span class=\"token builtin class-name\">enable</span> postgresql-11\nsystemctl start postgresql-11</code></pre></div>\n<ol start=\"4\">\n<li>Automatic startup or auto-initialization of data\ndirectory is not enabled for Red Hat family distributions due to some policies. So, you need to perform the following steps manually to complete your database installation.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">service</span> postgresql initdb\n<span class=\"token function\">chkconfig</span> postgresql on</code></pre></div>\n<h3 id=\"createaccess-database\"><a href=\"#createaccess-database\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create&#x26;Access Database</h3>\n<p>To create/drop a new database, in this example named mydb, you use the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">su</span> postgres\ncreatedb mydb  <span class=\"token comment\">#create database</span>\ndropdb mydb  <span class=\"token comment\"># drop database</span></code></pre></div>\n<p>The psql program has a number of internal commands that are not SQL commands. They begin with the backslash character, “\\”. For example, you can get help on the syntax of various PostgreSQL SQL commands by typing:<code class=\"language-text\">\\h</code>,To get out of psql, type:<code class=\"language-text\">\\q</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">psql mydb  <span class=\"token comment\">#active mydb database</span>\n<span class=\"token punctuation\">\\</span>h  <span class=\"token comment\"># get help</span>\n<span class=\"token punctuation\">\\</span>q  <span class=\"token comment\"># get out</span></code></pre></div>\n<p>The last line printed out by psql is the prompt, and it indicates that psql is listening to you and that you can type SQL queries into a work space maintained by psql. Try out these commands:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">mydb</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> SELECT version<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                         version\n------------------------------------------------------------------------------------------\n PostgreSQL <span class=\"token number\">11.7</span> on x86_64-pc-linux-gnu, compiled by gcc <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">4.9</span>.2-10<span class=\"token punctuation\">)</span> <span class=\"token number\">4.9</span>.2, <span class=\"token number\">64</span>-bit\n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> row<span class=\"token punctuation\">)</span>\n\n<span class=\"token assign-left variable\">mydb</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> SELECT current_date<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">date</span>\n------------\n <span class=\"token number\">2016</span>-01-07\n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> row<span class=\"token punctuation\">)</span>\n\n<span class=\"token assign-left variable\">mydb</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> SELECT <span class=\"token number\">2</span> + <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n ?column?\n----------\n        <span class=\"token number\">4</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> row<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"manageconfiguration-database\"><a href=\"#manageconfiguration-database\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Manage&#x26;Configuration Database</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pg_ctl status -D /var/lib/pgsql/data <span class=\"token comment\"># 查看状态</span>\npg_ctl stop -D /var/lib/pgsql/data <span class=\"token comment\"># 关闭</span>\npg_ctl start -D /var/lib/pgsql/data <span class=\"token comment\"># 启动</span>\npg_ctl restart -D /var/lib/pgsql/data <span class=\"token comment\"># 重启</span>\npg_ctl initdb -D /var/lib/pgsql/data <span class=\"token comment\"># 初始化</span></code></pre></div>\n<p>Two file contents need to be modified when the client cannot connect to the database：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#  /var/lib/pgsql/data/postgresql.conf</span>\nlisten_addresses <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\n<span class=\"token comment\">#  /var/lib/pgsql/data/pg_hba.conf</span>\n<span class=\"token function\">host</span>    all             all             your_ip/32         trust\n<span class=\"token comment\">#  FATAL: role \"mydb\" is not permitted to log in</span>\nalter user mydb login<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># permission denied for relation test</span>\npsql postgres\n<span class=\"token punctuation\">\\</span>c mydb <span class=\"token comment\"># switch to mydb database</span>\nGRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO mydb<span class=\"token punctuation\">;</span> <span class=\"token comment\"># grant all permissions to all tables to mydb</span></code></pre></div>","timeToRead":2,"frontmatter":{"title":"ⅠSetup PostgreSQL","date":"April 01, 2020","spoiler":"open source database","cta":"postgres"},"fields":{"slug":"/en/install-postgre-on-centos/","langKey":"en"}}},"pageContext":{"slug":"/en/install-postgre-on-centos/","translations":["en"],"translatedLinks":[]}}}