{"componentChunkName":"component---src-templates-blog-post-js","path":"/common-oracle-dba-tasks/","result":{"data":{"site":{"siteMetadata":{"title":"知机县急流津","author":"lee-ping"}},"markdownRemark":{"id":"ec41c9df-edd1-523e-a804-b9008923261a","html":"<p>作为Oracle数据库管理员（DBA），您可以期望参与各种任务。例如：</p>\n<ul>\n<li>安装Oracle软件</li>\n<li>创建Oracle数据库</li>\n<li>对数据库和软件执行更新操作</li>\n<li>启动和停止数据库实例</li>\n<li>管理数据库存储结构</li>\n<li>管理用户和安全</li>\n<li>管理数据库对象，如表、索引和视图</li>\n<li>备份数据库且必要时执行恢复操作</li>\n<li>监控数据库的状态并根据需要采取预防或纠正措施</li>\n<li>监视和调整数据库性能</li>\n<li>诊断关键错误并将其报告给Oracle支持服务</li>\n</ul>\n<h3 id=\"安装oracle软件\"><a href=\"#%E5%AE%89%E8%A3%85oracle%E8%BD%AF%E4%BB%B6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装Oracle软件</h3>\n<p>这里只说明Linux操作系统上安装Oracle数据库，Windows上的安装不在此讨论，这是因为在Linux上安装时碰到的问题较多，我们寻找出一个安装成功的最短路径，遇到具体的故障再具体说明。</p>\n<ul>\n<li>下载<a href=\"https://www.oracle.com/technetwork/database/enterprise-edition/downloads/oracle19c-linux-5462157.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Oracle Database 19c (19.3) Software (64-bit)</a></li>\n<li>\n<p>Oracle Installation Prerequisites</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yum <span class=\"token function\">install</span> -y oracle-database-preinstall-19c</code></pre></div>\n</li>\n<li>其他步骤</li>\n</ul>\n<p>更改<code class=\"language-text\">oracle</code>用户密码。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">passwd</span> oracle</code></pre></div>\n<p>Set secure Linux to permissive by editing the “/etc/selinux/config” file, making sure the SELINUX flag is set as follows.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token assign-left variable\">SELINUX</span><span class=\"token operator\">=</span>permissive</code></pre></div>\n<p>Once the change is complete, restart the server or run the following command.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">setenforce Permissive</code></pre></div>\n<p>If you have the Linux firewall enabled, you will need to disable or configure it, as shown here or here. To disable it, do the following.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl stop firewalld\nsystemctl disable firewalld</code></pre></div>\n<p>Create the directories in which the Oracle software will be installed.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p /u01/app/oracle/product/19.0.0/dbhome_1\n<span class=\"token function\">mkdir</span> -p /u02/oradata\n<span class=\"token function\">chown</span> -R oracle:oinstall /u01 /u02\n<span class=\"token function\">chmod</span> -R <span class=\"token number\">775</span> /u01 /u02</code></pre></div>\n<blockquote>\n<p>The scripts are created using the cat command, with all the ”$” characters escaped. If you want to manually create these files, rather than using the cat command, remember to remove the ”” characters before the ”$” characters.</p>\n</blockquote>\n<p>Create a “scripts” directory.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> /home/oracle/scripts</code></pre></div>\n<p>Create an environment file called “setEnv.sh”. The ”$” characters are escaped using ””. If you are not creating the file with the cat command, you will need to remove the escape characters.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">></span> /home/oracle/scripts/setEnv.sh <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF\n# Oracle Settings\nexport TMP=/tmp\nexport TMPDIR=\\<span class=\"token variable\">$TMP</span>\n\nexport ORACLE_HOSTNAME=ol7-19.localdomain\nexport ORACLE_UNQNAME=cdb1\nexport ORACLE_BASE=/u01/app/oracle\nexport ORACLE_HOME=\\<span class=\"token variable\">$ORACLE_BASE</span>/product/19.0.0/dbhome_1\nexport ORA_INVENTORY=/u01/app/oraInventory\nexport ORACLE_SID=cdb1\nexport PDB_NAME=pdb1\nexport DATA_DIR=/u02/oradata\n\nexport PATH=/usr/sbin:/usr/local/bin:\\<span class=\"token environment constant\">$PATH</span>\nexport PATH=\\<span class=\"token variable\">$ORACLE_HOME</span>/bin:\\<span class=\"token environment constant\">$PATH</span>\n\nexport LD_LIBRARY_PATH=\\<span class=\"token variable\">$ORACLE_HOME</span>/lib:/lib:/usr/lib\nexport CLASSPATH=\\<span class=\"token variable\">$ORACLE_HOME</span>/jlib:\\<span class=\"token variable\">$ORACLE_HOME</span>/rdbms/jlib\nEOF</span></code></pre></div>\n<p>Add a reference to the “setEnv.sh” file at the end of the “/home/oracle/.bash_profile” file.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\". /home/oracle/scripts/setEnv.sh\"</span> <span class=\"token operator\">>></span> /home/oracle/.bash_profile</code></pre></div>\n<p>Create a “start<em>all.sh” and “stop</em>all.sh” script that can be called from a startup/shutdown service. Make sure the ownership and permissions are correct.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> <span class=\"token operator\">></span> /home/oracle/scripts/start_all.sh <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF\n#!/bin/bash\n. /home/oracle/scripts/setEnv.sh\n\nexport ORAENV_ASK=NO\n. oraenv\nexport ORAENV_ASK=YES\n\ndbstart \\<span class=\"token variable\">$ORACLE_HOME</span>\nEOF</span>\n\n\n<span class=\"token function\">cat</span> <span class=\"token operator\">></span> /home/oracle/scripts/stop_all.sh <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF\n#!/bin/bash\n. /home/oracle/scripts/setEnv.sh\n\nexport ORAENV_ASK=NO\n. oraenv\nexport ORAENV_ASK=YES\n\ndbshut \\<span class=\"token variable\">$ORACLE_HOME</span>\nEOF</span>\n\n<span class=\"token function\">chown</span> -R oracle:oinstall /home/oracle/scripts\n<span class=\"token function\">chmod</span> u+x /home/oracle/scripts/*.sh</code></pre></div>\n<p>Once the installation is complete and you’ve edited the “/etc/oratab”, you should be able to start/stop the database with the following scripts run from the “oracle” user.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">~/scripts/start_all.sh\n~/scripts/stop_all.sh</code></pre></div>\n<p>You can see how to create a Linux service to automatically start/stop the database <a href=\"https://oracle-base.com/articles/linux/linux-services-systemd#creating-linux-services\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<ul>\n<li>安装</li>\n</ul>\n<p>Switch to the ORACLE<em>HOME directory, unzip the software directly into this path and start the Oracle Universal Installer (OUI) by issuing one of the following commands in the ORACLE</em>HOME directory. The interactive mode will display GUI installer screens to allow user input, while the silent mode will install the software without displaying any screens, as all required options are already specified on the command line.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Unzip software.</span>\n<span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$ORACLE_HOME</span>\n<span class=\"token function\">unzip</span> -oq /path/to/software/LINUX.X64_193000_db_home.zip\n\n<span class=\"token comment\"># Interactive mode.</span>\n./runInstaller</code></pre></div>","timeToRead":4,"frontmatter":{"title":"Oracle DBA常见任务","date":"April 07, 2020","spoiler":"oracle DBA 手册","cta":"plsql"},"fields":{"slug":"/common-oracle-dba-tasks/","langKey":"zh-hans"}}},"pageContext":{"slug":"/common-oracle-dba-tasks/","previous":{"fields":{"slug":"/install-postgre-on-centos/","langKey":"zh-hans","directoryName":"install-postgre-on-centos","maybeAbsoluteLinks":[]},"frontmatter":{"title":"Ⅰ起步：PostgreSQL"}},"next":{"fields":{"slug":"/cpp/","langKey":"zh-hans","directoryName":"cpp","maybeAbsoluteLinks":[]},"frontmatter":{"title":"CPP"}},"translations":[],"translatedLinks":[]}}}